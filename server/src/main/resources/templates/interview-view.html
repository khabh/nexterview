<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Interview Details</title>
    <link rel="stylesheet" href="/css/interview.css">
    <script src="/js/sweetalert.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const interviewId = document.getElementById("interview-id").value;
            fetchInterview(interviewId);
        });

        async function fetchInterview(interviewId) {
            try {
                const response = await apiFetch(`/api/interviews/${interviewId}`);
                const interview = await response.json();
                renderInterview(interview);
            } catch (error) {
                Swal.fire("인터뷰를 불러오지 못했습니다.", "다시 시도해주세요.", "error");
            }
        }

        function renderInterview(interview) {
            document.getElementById("interview-title").textContent = interview.title;

            const answersContainer = document.getElementById("answers");
            answersContainer.innerHTML = "";
            interview.promptAnswers.forEach(answer => {
                const div = document.createElement("div");
                div.classList.add("answer-entry");
                div.innerHTML = `<strong>${answer.query}</strong><p>${answer.answer}</p>`;
                answersContainer.appendChild(div);
            });

            const dialoguesContainer = document.getElementById("dialogues");
            dialoguesContainer.innerHTML = "";
            interview.dialogues.forEach(dialogue => {
                const div = document.createElement("div");
                div.classList.add("dialogue-entry");
                div.innerHTML = `<strong>${dialogue.question}</strong><p>${dialogue.answer}</p>`;
                dialoguesContainer.appendChild(div);
            });
        }
    </script>
</head>
<body>
<input type="hidden" id="interview-id" th:value="${interviewId}">
<div class="container">
    <h2 id="interview-title">인터뷰 제목</h2>

    <h3>프롬프트 답변</h3>
    <div class="query-container">
        <div id="answers"></div>
    </div>
    <h3>질문과 답변</h3>
    <div id="dialogues"></div>
</div>
</body>
</html>
